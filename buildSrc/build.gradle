//buildscript {
//    def artifactoryContextUrl = "https://software.r3.com/artifactory"
//    def cordaGradlePluginsVersion = "6.0.0-SNAPSHOT"
//    repositories {
//        maven {
//            url "$artifactoryContextUrl/corda-dev"
//            content {
//                includeGroupByRegex 'net\\.corda\\.plugins(\\..*)?'
//            }
//        }
//        maven {
//            url "$artifactoryContextUrl/corda-releases"
//            content {
//                includeGroupByRegex 'net\\.corda\\.plugins(\\..*)?'
//            }
//        }
//        maven {
//            url "$artifactoryContextUrl/corda-os-maven"
//            content {
//                includeGroupByRegex 'net\\.corda\\.plugins(\\..*)?'
//            }
//        }
//        gradlePluginPortal()
//    }
//
//    dependencies {
//        classpath "net.corda.plugins:quasar-utils:$cordaGradlePluginsVersion"
//        classpath "net.corda.plugins:flask:$cordaGradlePluginsVersion"
//    }
//
//}

plugins {
    id 'groovy-gradle-plugin'
}

def cordaGradlePluginsVersion = "6.0.0-SNAPSHOT"
def artifactoryContextUrl = "https://software.r3.com/artifactory"

repositories {
    maven {
        url "$artifactoryContextUrl/corda-dev"
        content {
            includeGroupByRegex 'net\\.corda\\.plugins(\\..*)?'
        }
    }
    maven {
        url "$artifactoryContextUrl/corda-releases"
        content {
            includeGroupByRegex 'net\\.corda\\.plugins(\\..*)?'
        }
    }
    maven {
        url "$artifactoryContextUrl/corda-os-maven"
        content {
            includeGroupByRegex 'net\\.corda\\.plugins(\\..*)?'
        }
    }
}

// We can't get the values directly from `gradle.properties` from here for some gradle-y reason.
// So we'll load it into our own object to grab what we need.
def constants = new Properties()
file("$rootDir/../gradle.properties").withInputStream { InputStream input -> constants.load(input) }
def bndVersion = constants.getProperty('bndVersion')

dependencies {
    implementation "biz.aQute.bnd:biz.aQute.bnd.gradle:$bndVersion"
    implementation "biz.aQute.bnd:biz.aQute.bndlib:$bndVersion"
    implementation "net.corda.plugins:quasar-utils:$cordaGradlePluginsVersion"
    implementation "net.corda.plugins:flask:$cordaGradlePluginsVersion"
}

repositories {
    //needed for kotlin osgi bundles generated by us (e.g. quasar)
    maven {
        url = "${constants.getProperty('artifactoryContextUrl')}/corda-dependencies"
    }
    mavenCentral()
}