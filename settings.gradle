pluginManagement {
    repositories {
        maven {
            url "$artifactoryContextUrl/corda-releases"
            content {
                includeGroupByRegex 'net\\.corda\\.plugins(\\..*)?'
            }
        }
        maven {
            url "$artifactoryContextUrl/corda-os-maven"
            content {
                includeGroupByRegex 'net\\.corda\\.cordapp(\\..*)?'
            }
            credentials {
                username = settings.ext.find('cordaArtifactoryUsername') ?: System.getenv('CORDA_ARTIFACTORY_USERNAME')
                password = settings.ext.find('cordaArtifactoryPassword') ?: System.getenv('CORDA_ARTIFACTORY_PASSWORD')
            }
        }
        gradlePluginPortal()
        maven {
            url "$artifactoryContextUrl/engineering-tools-maven"
            credentials {
                if (settings.hasProperty("cordaArtifactoryUsername")) {
                    username = settings.cordaArtifactoryUsername
                } else {
                    username = System.getenv('CORDA_ARTIFACTORY_USERNAME')
                }

                if (settings.hasProperty("cordaArtifactoryPassword")) {
                    password = settings.cordaArtifactoryPassword
                } else {
                    password = System.getenv('CORDA_ARTIFACTORY_PASSWORD')
                }
            }
        }
    }
    plugins {
        id 'net.corda.cordapp.cordapp-configuration' version cordaApiVersion
        id 'org.jetbrains.kotlin.jvm' version kotlinVersion
        id 'org.jetbrains.kotlin.plugin.allopen' version kotlinVersion
        id 'org.jetbrains.kotlin.plugin.jpa' version kotlinVersion
        id 'net.corda.plugins.cordapp-cpk' version cordaGradlePluginsVersion
        id 'net.corda.plugins.quasar-utils' version cordaGradlePluginsVersion
        id 'com.r3.internal.gradle.plugins.r3ArtifactoryPublish' version internalPublishVersion
        id 'com.r3.internal.gradle.plugins.r3Publish' version internalPublishVersion
        id 'io.gitlab.arturbosch.detekt' version detektPluginVersion
    }
}

dependencyResolutionManagement {
    repositories {
        mavenCentral()
    }
}

rootProject.name = 'corda-runtime-os'
include 'applications:examples:demo-app'
include 'applications:examples:demo-publisher'
include 'applications:examples:goodbyeworld'
include 'applications:examples:persistence:persistence-demo'
include 'applications:examples:persistence:persistence-demo-publisher'
include 'applications:tools:kafka-reader'
include 'applications:tools:kafka-setup'
include 'applications:tools:p2p-test:cryptoservice-key-creator'
include 'components:configuration:configuration-read-service'
include 'components:configuration:configuration-read-service-impl'
include 'components:flow-service'
include 'components:gateway'
include 'components:kafka-config-read'
include 'components:kafka-config-write'
include 'components:kafka-topic-admin'
include 'components:gateway'
include 'components:link-manager'
include 'components:examples:config-reader'
include 'components:examples:durable-sub'
include 'components:examples:publisher'
include 'components:examples:pubsub-sub'
include 'components:examples:state-plus-event-sub'
include 'libs:class-info'
include 'libs:configuration:configuration-read'
include 'libs:configuration:configuration-read-impl'
include 'libs:configuration:configuration-write'
include 'libs:configuration:configuration-write-impl'
include 'libs:crypto:crypto-internal'
include 'libs:crypto:crypto-impl'
include 'libs:crypto:crypto-testkit'
include 'libs:db:db-admin'
include 'libs:db:db-admin-impl'
include 'libs:db:db-core'
include 'libs:db:db-orm'
include 'libs:db:db-orm-impl'
include 'libs:db:osgi-integration-tests'
include 'libs:examples:helloworld'
include 'libs:examples:helloworld-impl'
include 'libs:flows:dependency-injection'
include 'libs:flows:dependency-injection-impl'
include 'libs:flows:flow-manager'
include 'libs:flows:flow-manager-impl'
include 'libs:flows:statemachine'
include 'libs:flows:statemachine-impl'
include 'libs:http-rpc:http-rpc'
include 'libs:http-rpc:http-rpc-tools'
include 'libs:http-rpc:json-serialization'
include 'libs:install'
include 'libs:install:split-packages-one'
include 'libs:install:split-packages-one:library-one'
include 'libs:install:split-packages-two'
include 'libs:install:split-packages-two:library-two'
include 'libs:kafka-utils:topic-admin'
include 'libs:kafka-utils:topic-admin-impl'
include 'libs:kotlin-reflection'
include 'libs:kotlin-reflection:kotlin-reflection-test-api'
include 'libs:kotlin-reflection:kotlin-reflection-test-example'
include 'libs:lifecycle:lifecycle'
include 'libs:lifecycle:lifecycle-impl'
include 'libs:lifecycle:registry'
include 'libs:messaging:messaging'
include 'libs:messaging:db-messaging-impl'
include 'libs:messaging:kafka-messaging-impl'
include 'libs:messaging:inmemory-messaging-impl'
include 'libs:p2p-crypto'
include 'libs:sandbox'
include 'libs:sandbox:sandbox-cpk-library'
include 'libs:sandbox:sandbox-cpk-one'
include 'libs:sandbox:sandbox-cpk-two'
include 'libs:sandbox:sandbox-cpk-three'
include 'libs:schema-registry:schema-registry'
include 'libs:schema-registry:schema-registry-impl'
include 'libs:security-manager'
include 'libs:security-manager:osgi-integration-tests'
include 'libs:security-manager:osgi-integration-tests:osgi-invoker'
include 'libs:security-manager:osgi-integration-tests:osgi-invoker-impl'
include 'libs:security-manager:osgi-integration-tests:local-permissions'
include 'libs:security-manager:osgi-integration-tests:local-permissions-impl'
include 'libs:serialization:checkpoint-serialization-api'
include 'libs:serialization:kryo-custom-serializers'
include 'libs:serialization:serialization-amqp'
include 'libs:serialization:serialization-amqp:serializable-cpk-one'
include 'libs:serialization:serialization-amqp:serializable-cpk-two'
include 'libs:serialization:serialization-amqp:serializable-cpk-three'
include 'libs:serialization:serialization-amqp:serializable-cpk-four'
include 'libs:serialization:serialization-encoding'
include 'libs:serialization:serialization-kryo'
include 'libs:utilities'
include 'libs:virtual-node:virtual-node-cache'
include 'libs:virtual-node:virtual-node-cache-impl'
include 'osgi-framework-api'
include 'osgi-framework-bootstrap'
include 'testing:apps:test-app'
include 'testing:bundles:testing-cats'
include 'testing:bundles:testing-dogs'
include 'testing:test-utilities'
