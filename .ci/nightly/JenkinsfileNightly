@Library('corda-shared-build-pipeline-steps@mbrkic-r3/CORE-16243/persistence-worker') _
// TODO revert to 5.1 after branch above is merged to it
// @Library('corda-shared-build-pipeline-steps@5.1') _

cordaPipelineKubernetesAgent(
    dailyBuildCron: 'H 03 * * *',
    runIntegrationTests: true,
    publishRepoPrefix: 'corda-ent-maven',
    createPostgresDb: true,
    publishOSGiImage: true,
    publishPreTestImage: true,
    publishHelmChart: true,
    e2eTestName: 'corda-runtime-os-e2e-tests',
    runE2eTests: true,
    runResiliencyTests: true,
    gradleAdditionalArgs: '-Dscan.tag.Nightly-Build',
    generateSbom: true,
    javaVersion: '17'
)
