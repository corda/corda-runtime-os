// This is a test resource file, copied over to a temp gradle project by the tests
pluginManagement {
    repositories {
        mavenCentral()
        maven {
            // TODO: Snyk treats it a gradle config to analyse - and there's no artifactoryContextUrl defined
            //  because of this command:
            //  snyk-linux test --configuration-matching='^runtimeClasspath$' --file=tools/corda-runtime-gradle-plugin/src/smokeTest/resources/workflows/build.gradle --policy-path=.snyk --severity-threshold=high
            //  So that's because of workflows/build.gradle file
            url = "$artifactoryContextUrl/corda-os-maven"
            authentication {
                basic(BasicAuthentication)
            }
            credentials {
                username = settings.ext.find('cordaArtifactoryUsername') ?: System.getenv('CORDA_ARTIFACTORY_USERNAME')
                password = settings.ext.find('cordaArtifactoryPassword') ?: System.getenv('CORDA_ARTIFACTORY_PASSWORD')
            }
        }
    }
}

include ':workflows'
